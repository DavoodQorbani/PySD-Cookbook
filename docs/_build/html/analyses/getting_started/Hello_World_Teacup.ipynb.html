

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hello World: The Teacup Model &mdash; PySD-Cookbook 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PySD-Cookbook 0.1.0 documentation" href="../../index.html"/>
        <link rel="up" title="Getting Started" href="getting_started.html"/>
        <link rel="next" title="Installation and Setup" href="Installation_and_Setup.ipynb.html"/>
        <link rel="prev" title="Getting Started" href="getting_started.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../index.html" class="icon icon-home"> PySD-Cookbook
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="getting_started.html">Getting Started</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Hello World: The Teacup Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-the-model">Load the model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-with-default-parameters">Run with default parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#return-additional-model-components">Return additional model components</a></li>
<li class="toctree-l3"><a class="reference internal" href="#return-values-at-a-specific-time">Return values at a specific time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-parameter-values">Modify parameter values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-model-initial-conditions">Specifying model initial conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collecting-results">Collecting Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Installation_and_Setup.ipynb.html">Installation and Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Installation_and_Setup.ipynb.html#installing-python">Installing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="Installation_and_Setup.ipynb.html#installing-pip">Installing pip</a></li>
<li class="toctree-l3"><a class="reference internal" href="Installation_and_Setup.ipynb.html#installing-pysd">Installing PySD</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Installation_and_Setup.ipynb.html#manually-installing-pysd-s-dependencies">Manually installing PySD&#8217;s dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Installation_and_Setup.ipynb.html#launch-ipython-notebook-and-get-started">Launch iPython Notebook, and get started</a></li>
<li class="toctree-l3"><a class="reference internal" href="Installation_and_Setup.ipynb.html#upgrading-pysd">Upgrading PySD</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualization.html">Visualization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../visualization/Visualizations for Print Media.ipynb.html">Visualizations for Print Media</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../visualization/Visualizations for Print Media.ipynb.html#contents">Contents:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../visualization/Visualizations for Print Media.ipynb.html#other-resources">Other resources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../visualization/Visualizations for Print Media.ipynb.html#uncertainty">Uncertainty:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fitting/fitting.html">Model Fitting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fitting/Fitting a suite of datasets.ipynb.html">Fitting a suite of datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fitting/Fitting a suite of datasets.ipynb.html#ingredients">Ingredients</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../fitting/Fitting_with_Optimization.ipynb.html">Fitting a model&#8217;s parameters with run-at-a-time optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fitting/Fitting_with_Optimization.ipynb.html#when-to-use-this-technique">When to use this technique</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../fitting/Fitting_with_Optimization.ipynb.html#ingredients">Ingredients:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fitting/Fitting_with_Optimization.ipynb.html#recipe">Recipe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fitting/Fitting_with_Optimization.ipynb.html#result">Result</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../fitting/Step_at_a_time_optimization.ipynb.html">Step-at-a-time optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../fitting/Step_at_a_time_optimization.ipynb.html#when-to-use-this-technique">When to use this technique</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../fitting/Step_at_a_time_optimization.ipynb.html#ingredients">Ingredients</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../fitting/Step_at_a_time_optimization.ipynb.html#model">Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fitting/Step_at_a_time_optimization.ipynb.html#data">Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../fitting/Step_at_a_time_optimization.ipynb.html#the-recipe">The Recipe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../fitting/Step_at_a_time_optimization.ipynb.html#result">Result</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../geo/geo.html">Geographic Analyses</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html">Using SD models to understand the differences between population measures at varying levels of geographic disagregation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#ingredients">Ingredients</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#population-data-by-age-cohort">Population data by age cohort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#a-model-of-an-aging-population">A model of an aging population</a></li>
<li class="toctree-l4"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#geography-information">Geography Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#part-a-predict-state-level-values-from-national-model-fit">Part A: Predict state-level values from national model fit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-1-initialize-the-model-using-census-data">Step 1: Initialize the model using census data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-2-fit-the-national-level-model-to-the-remaining-data">Step 2: Fit the national level model to the remaining data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-3-make-state-level-predictions">Step 3: Make state-level predictions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-4-compare-model-predictions-with-measured-data">Step 4: Compare model predictions with measured data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-5-merge-with-geo-data-to-plot">Step 5: Merge with geo data to plot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#part-b-fit-state-by-state-models">Part B: fit state-by-state models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-1-write-the-optimization-functions-to-account-for-the-state">Step 1: Write the optimization functions to account for the state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-2-apply-optimization-to-each-state">Step 2: Apply optimization to each state</a></li>
<li class="toctree-l3"><a class="reference internal" href="../geo/Exploring models across geographic scales.ipynb.html#step-3-merge-with-geographic-data">Step 3: Merge with geographic data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data/data.html">Data Gathering</a><ul class="simple">
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">PySD-Cookbook</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="getting_started.html">Getting Started</a> &raquo;</li>
      
    <li>Hello World: The Teacup Model</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/analyses/getting_started/Hello_World_Teacup.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="hello-world-the-teacup-model">
<h1>Hello World: The Teacup Model<a class="headerlink" href="#hello-world-the-teacup-model" title="Permalink to this headline">¶</a></h1>
<p>This notebook demonstrates the basic capability of PySD using a model of
a cup of tea cooling to room temperature.</p>
<p>Our model simulates <a class="reference external" href="http://www.ugrad.math.ubc.ca/coursedoc/math100/notes/diffeqs/cool.html">Newton&#8217;s Law of
Cooling</a>,
which follows the functional form:</p>
<div class="math">
\[\frac{dT}{dt} = k(T - T_{ambient})\]</div>
<p>This model has all of the canonical components of a system dynamics
model: a stock, a flow, a feedback loop, a control parameter, and
exhibits dynamic behavior. The model equations are:</p>
<div class="highlight-python"><div class="highlight"><pre>Characteristic Time=
        10
Units: Minutes

Heat Loss to Room=
    (Teacup Temperature - Room Temperature) / Characteristic Time
Units: Degrees/Minute
This is the rate at which heat flows from the cup into the room.

Room Temperature=
    70
Units: Degrees

Teacup Temperature= INTEG (
    -Heat Loss to Room,
        180)
Units: Degrees
</pre></div>
</div>
<div class="section" id="load-the-model">
<h2>Load the model<a class="headerlink" href="#load-the-model" title="Permalink to this headline">¶</a></h2>
<p>We begin by importing the PySD module using the python standard import
commands. We then use PySD&#8217;s Vensim model translator to import the model
from the Vensim model file and create a model object. We see that PySD
translates the vensim component names into acceptable python
identifiers.</p>
<div class="code python highlight-python"><div class="highlight"><pre>%pylab inline
import pysd
model = pysd.read_vensim(&#39;models/Teacup/Teacup.mdl&#39;)
print model.components.doc()
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Populating the interactive namespace from numpy and matplotlib
characteristic_time = 10
Type: Flow or Auxiliary


This function returns an aggregation of all of the docstrings of all of the
elements in the model.

final_time = 30
Type: Flow or Auxiliary


heat_loss_to_room = (self.teacup_temperature()- self.room_temperature()) / self.characteristic_time()
Type: Flow or Auxiliary


initial_time = 0
Type: Flow or Auxiliary


room_temperature = 70
Type: Flow or Auxiliary


Stock: teacup_temperature =
         -self.heat_loss_to_room()

Initial Value: 180
Do not overwrite this function

This helper function allows the model components to
access the time component directly.

time_step = 0.125
Type: Flow or Auxiliary
</pre></div>
</div>
</div>
<div class="section" id="run-with-default-parameters">
<h2>Run with default parameters<a class="headerlink" href="#run-with-default-parameters" title="Permalink to this headline">¶</a></h2>
<p>To understand the general behavior of the model, we can run a simulation
using the default parameters specified by the Vensim model file. The
default behavior of the run function is to return the value of the
stocks as a <a class="reference external" href="http://pandas.pydata.org/">pandas</a> dataframe:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">stocks</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">stocks</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>teacup_temperature</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.000</th>
      <td>180.000000</td>
    </tr>
    <tr>
      <th>0.125</th>
      <td>178.633556</td>
    </tr>
    <tr>
      <th>0.250</th>
      <td>177.284092</td>
    </tr>
    <tr>
      <th>0.375</th>
      <td>175.951388</td>
    </tr>
    <tr>
      <th>0.500</th>
      <td>174.635239</td>
    </tr>
  </tbody>
</table>
</div><p>Pandas has some simple plotting utility built in which allows us to
easily visualize the results.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">stocks</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;matplotlib.figure.Figure at 0x10d867910&gt;
</pre></div>
</div>
<img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_5_1.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_5_1.png" />
</div>
<div class="section" id="return-additional-model-components">
<h2>Return additional model components<a class="headerlink" href="#return-additional-model-components" title="Permalink to this headline">¶</a></h2>
<p>If we wish to see the values of model components other than the stocks,
we can pass a list of component names with the keyword argument
<code class="docutils literal"><span class="pre">return_columns</span></code>. This will change the columns of the returned
dataframe such that they contain samples of the requested model
components:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">values</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">return_columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;teacup_temperature&#39;</span><span class="p">,</span> <span class="s">&#39;room_temperature&#39;</span><span class="p">])</span>
<span class="n">values</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">)</span>
<span class="n">values</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>room_temperature</th>
      <th>teacup_temperature</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.000</th>
      <td>70</td>
      <td>180.000000</td>
    </tr>
    <tr>
      <th>0.125</th>
      <td>70</td>
      <td>178.633556</td>
    </tr>
    <tr>
      <th>0.250</th>
      <td>70</td>
      <td>177.284092</td>
    </tr>
    <tr>
      <th>0.375</th>
      <td>70</td>
      <td>175.951388</td>
    </tr>
    <tr>
      <th>0.500</th>
      <td>70</td>
      <td>174.635239</td>
    </tr>
  </tbody>
</table>
</div><img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_7_1.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_7_1.png" />
</div>
<div class="section" id="return-values-at-a-specific-time">
<h2>Return values at a specific time<a class="headerlink" href="#return-values-at-a-specific-time" title="Permalink to this headline">¶</a></h2>
<p>Sometimes we want to specify the timestamps that the run function should
return values. For instance, if we are comparing the result of our model
with data that arrives at irregular time intervals. We can do so using
the <code class="docutils literal"><span class="pre">return_timestamps</span></code> keyword argument. This argument expects a list
of timestamps, and will return values at those timestamps.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">stocks</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">return_timestamps</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mf">9.5</span><span class="p">,</span> <span class="mf">13.178</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">])</span>
<span class="n">stocks</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">&#39;o&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">)</span>
<span class="n">stocks</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>teacup_temperature</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.0</th>
      <td>180.000000</td>
    </tr>
    <tr>
      <th>1.0</th>
      <td>169.532119</td>
    </tr>
    <tr>
      <th>3.0</th>
      <td>151.490002</td>
    </tr>
    <tr>
      <th>7.0</th>
      <td>124.624385</td>
    </tr>
    <tr>
      <th>9.5</th>
      <td>112.541515</td>
    </tr>
  </tbody>
</table>
</div><img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_9_1.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_9_1.png" />
</div>
<div class="section" id="modify-parameter-values">
<h2>Modify parameter values<a class="headerlink" href="#modify-parameter-values" title="Permalink to this headline">¶</a></h2>
<p>We can specify changes to the parameters of the model in the call to the
run function. Here we set the room temperature to the constant value of
20 degrees before running the simulation.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">values</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;room_temperature&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">})</span>
<span class="n">values</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_11_0.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_11_0.png" />
<p>We can also specify that a parameter be set with a time-varying input.
In this case, we raise the room temperature from 20 to 80 degrees over
the course of the 30 minutes. We can see that once the room temperature
rises above that of the tea, the tea begins to warm up again.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">temp_timeseries</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="n">data</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;room_temperature&#39;</span><span class="p">:</span><span class="n">temp_timeseries</span><span class="p">},</span><span class="n">return_columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;teacup_temperature&#39;</span><span class="p">,</span> <span class="s">&#39;room_temperature&#39;</span><span class="p">])</span>
<span class="n">values</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_13_0.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_13_0.png" />
</div>
<div class="section" id="specifying-model-initial-conditions">
<h2>Specifying model initial conditions<a class="headerlink" href="#specifying-model-initial-conditions" title="Permalink to this headline">¶</a></h2>
<p>In addition to parameters, we can set the initial conditions for the
model, by passing a tuple to the argument <code class="docutils literal"><span class="pre">initial_condition</span></code>. In this
case, the first element of the tuple is the time at which the model
should begin its execution, and the second element of the tuple is a
dictionary containing the values of the stocks at that particular time.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">stocks</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;room_temperature&#39;</span><span class="p">:</span><span class="mi">75</span><span class="p">},</span>
                   <span class="n">initial_condition</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;teacup_temperature&#39;</span><span class="p">:</span><span class="mi">33</span><span class="p">}))</span>
<span class="n">stocks</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_15_0.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_15_0.png" />
<p>Once a model has been run, we can choose to run it forwards again from
its current state. To do this we specify a new set of timestamps over
which we would like the model to run, and pass the
<code class="docutils literal"><span class="pre">intitial_condition</span></code> argument the string <code class="docutils literal"><span class="pre">&quot;current&quot;</span></code>.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">values</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">initial_condition</span><span class="o">=</span><span class="s">&#39;current&#39;</span><span class="p">,</span> <span class="n">return_timestamps</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="mi">45</span><span class="p">))</span>
<span class="n">values</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_17_0.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_17_0.png" />
</div>
<div class="section" id="collecting-results">
<h2>Collecting Results<a class="headerlink" href="#collecting-results" title="Permalink to this headline">¶</a></h2>
<p>To collect all output from a series of run commands into a record, set
the <code class="docutils literal"><span class="pre">collect</span></code> flag to <code class="docutils literal"><span class="pre">True</span></code>. We can then access an aggregation of
all runs via the <code class="docutils literal"><span class="pre">.get_record()</span></code> method.</p>
<p>This can be helpful when running the model forwards for a period of
time, then returning control to the user, who will specify changes to
the model, and continue the integration forwards. In this case, we
change the room temperature at 30 minutes, perhaps by taking the tea out
into the cold.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">stocks0</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;room_temperature&#39;</span><span class="p">:</span><span class="mi">75</span><span class="p">},</span>
                    <span class="n">return_timestamps</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="n">collect</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">stocks1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;room_temperature&#39;</span><span class="p">:</span><span class="mi">25</span><span class="p">},</span> <span class="n">initial_condition</span><span class="o">=</span><span class="s">&#39;current&#39;</span><span class="p">,</span>
                    <span class="n">return_timestamps</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">60</span><span class="p">),</span> <span class="n">collect</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">stocks</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">get_record</span><span class="p">()</span>

<span class="n">stocks</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;Degrees F&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;Minutes&#39;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_19_0.png" src="analyses/getting_started/docs/analyses/getting_started/Hello_World_Teacup.ipynb_files/docs/analyses/getting_started/Hello_World_Teacup.ipynb_19_0.png" />
<p>To reset the record, use the method <code class="docutils literal"><span class="pre">.clear_record()</span></code> :</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">model</span><span class="o">.</span><span class="n">clear_record</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Installation_and_Setup.ipynb.html" class="btn btn-neutral float-right" title="Installation and Setup" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral" title="Getting Started" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, James Houghton.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>